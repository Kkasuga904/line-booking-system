<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸­ç®¡ç†ãƒ»å‰²ã‚Šå½“ã¦ | LINEäºˆç´„ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif;
            background: #f5f5f7;
            color: #1d1d1f;
            line-height: 1.5;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 999;
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin: 0;
            text-align: center;
            flex: 1;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .page-title:hover {
            color: #4a90e2;
        }

        /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .hamburger-menu {
            position: relative;
            z-index: 1001;
        }

        .hamburger-icon {
            width: 30px;
            height: 24px;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hamburger-icon span {
            display: block;
            height: 3px;
            width: 100%;
            background: #333;
            border-radius: 3px;
            transition: 0.3s;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 280px;
            height: 100%;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar.active {
            display: block;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-header h2 {
            font-size: 18px;
            margin: 0;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: #666;
            text-decoration: none;
            transition: 0.3s;
        }

        .nav-item:hover {
            background: #f5f5f5;
            color: #4a90e2;
        }

        .nav-item.active {
            background: #e8f4fd;
            color: #4a90e2;
            border-left: 3px solid #4a90e2;
        }

        .nav-icon {
            margin-right: 12px;
            font-size: 18px;
        }

        .nav-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            color: #555;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-btn:hover {
            background: #f8f9fa;
            border-color: #667eea;
            color: #667eea;
        }
        
        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .container {
            max-width: 1400px;
            margin: 80px auto 20px;
            padding: 0 20px;
        }
        
        /* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 600;
            color: #333;
        }
        
        .stat-change {
            font-size: 12px;
            margin-top: 8px;
            color: #666;
        }
        
        /* ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ— */
        .floor-map {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }
        
        .floor-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .floor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .seat {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .seat:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .seat-number {
            font-size: 24px;
            font-weight: 600;
            color: #333;
        }
        
        .seat-capacity {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }
        
        .seat-status {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        /* å¸­ã®çŠ¶æ…‹ */
        .seat.available {
            background: linear-gradient(135deg, #fff, #e8f8f0);
            border-color: #2ecc71;
        }
        
        .seat.available .seat-status {
            background: #2ecc71;
        }
        
        .seat.occupied {
            background: linear-gradient(135deg, #fff, #ffe8e8);
            border-color: #e74c3c;
        }
        
        .seat.occupied .seat-status {
            background: #e74c3c;
        }
        
        .seat.reserved {
            background: linear-gradient(135deg, #fff, #fff4e6);
            border-color: #f39c12;
        }
        
        .seat.reserved .seat-status {
            background: #f39c12;
        }
        
        .seat.cleaning {
            background: linear-gradient(135deg, #fff, #e6f4ff);
            border-color: #3498db;
        }
        
        .seat.cleaning .seat-status {
            background: #3498db;
        }
        
        /* å‡¡ä¾‹ */
        .legend {
            display: flex;
            gap: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        /* äºˆç´„å‰²ã‚Šå½“ã¦ãƒ‘ãƒãƒ« */
        .assignment-panel {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        .reservation-list {
            margin-top: 20px;
        }
        
        .reservation-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }
        
        .reservation-item:hover {
            background: #e8f0fe;
        }
        
        .reservation-info {
            flex: 1;
        }
        
        .customer-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .reservation-details {
            font-size: 14px;
            color: #666;
        }
        
        .assign-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .assign-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .assign-btn.assigned {
            background: #2ecc71;
        }
        
        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f5f5f7;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .form-input,
        .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
        }
        
        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
        <div class="hamburger-menu" id="hamburgerMenu">
            <div class="hamburger-icon" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <h1 class="page-title" onclick="window.location.href='/admin-full-featured.html'" style="cursor: pointer;">äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
    </div>

    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>ğŸ“‹ ç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
        </div>
        <nav class="sidebar-nav">
            <div style="padding: 10px 20px; font-size: 12px; color: #999; text-transform: uppercase; letter-spacing: 1px;">ãƒ¡ã‚¤ãƒ³</div>
            <a href="/admin-full-featured.html" class="nav-item">
                <span class="nav-icon">ğŸ“…</span>
                <span>ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</span>
            </a>
            <a href="/admin-list.html" class="nav-item">
                <span class="nav-icon">ğŸ“‹</span>
                <span>äºˆç´„ä¸€è¦§</span>
            </a>
            <a href="/admin-analytics.html" class="nav-item">
                <span class="nav-icon">ğŸ“Š</span>
                <span>çµ±è¨ˆãƒ»åˆ†æ</span>
            </a>
            <div style="padding: 10px 20px; font-size: 12px; color: #999; text-transform: uppercase; letter-spacing: 1px; margin-top: 20px;">äºˆç´„ç®¡ç†</div>
            <a href="/capacity-control-enhanced.html" class="nav-item">
                <span class="nav-icon">ğŸ¯</span>
                <span>äºˆç´„åˆ¶é™è¨­å®š</span>
            </a>
            <a href="/seats-management-enhanced.html" class="nav-item active">
                <span class="nav-icon">ğŸ’º</span>
                <span>å¸­ç®¡ç†ãƒ»å‰²ã‚Šå½“ã¦</span>
            </a>
            <a href="/admin-settings.html" class="nav-item">
                <span class="nav-icon">â°</span>
                <span>å–¶æ¥­æ™‚é–“è¨­å®š</span>
            </a>
            <a href="/admin-templates.html" class="nav-item">
                <span class="nav-icon">ğŸ“</span>
                <span>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†</span>
            </a>
            <a href="/admin-customers.html" class="nav-item">
                <span class="nav-icon">ğŸ‘¥</span>
                <span>é¡§å®¢ç®¡ç†</span>
            </a>
            <div style="padding: 10px 20px; font-size: 12px; color: #999; text-transform: uppercase; letter-spacing: 1px; margin-top: 20px;">é«˜åº¦ãªæ©Ÿèƒ½</div>
            <a href="/admin-analytics.html" class="nav-item">
                <span class="nav-icon">ğŸ“Š</span>
                <span>è©³ç´°åˆ†æ</span>
            </a>
            <a href="/admin-dashboard.html" class="nav-item">
                <span class="nav-icon">ğŸ¯</span>
                <span>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
            </a>
            <a href="/admin-notifications.html" class="nav-item">
                <span class="nav-icon">ğŸ””</span>
                <span>é€šçŸ¥ã‚»ãƒ³ã‚¿ãƒ¼</span>
            </a>
            <a href="/admin-advanced.html" class="nav-item">
                <span class="nav-icon">âš™ï¸</span>
                <span>è©³ç´°è¨­å®š</span>
            </a>
        </nav>
    </div>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="container">
        <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">ç·å¸­æ•°</div>
                <div class="stat-value">24</div>
                <div class="stat-change">ãƒ†ãƒ¼ãƒ–ãƒ«: 6 / ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼: 8 / å€‹å®¤: 2</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ç©ºå¸­</div>
                <div class="stat-value" style="color: #2ecc71;">12</div>
                <div class="stat-change">50% åˆ©ç”¨å¯èƒ½</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ä½¿ç”¨ä¸­</div>
                <div class="stat-value" style="color: #e74c3c;">8</div>
                <div class="stat-change">33% ä½¿ç”¨ä¸­</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">äºˆç´„æ¸ˆã¿</div>
                <div class="stat-value" style="color: #f39c12;">3</div>
                <div class="stat-change">æ¬¡ã®äºˆç´„: 19:00</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">æ¸…æƒä¸­</div>
                <div class="stat-value" style="color: #3498db;">1</div>
                <div class="stat-change">ç´„10åˆ†ã§åˆ©ç”¨å¯èƒ½</div>
            </div>
        </div>
        
        <!-- ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ— -->
        <div class="floor-map">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 class="floor-title">ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="nav-btn" onclick="openAddSeatModal()" style="background: #2ecc71; color: white; border: none;">
                        â• å¸­ã‚’è¿½åŠ 
                    </button>
                    <button class="nav-btn" onclick="toggleDeleteMode()" style="background: #e74c3c; color: white; border: none;">
                        ğŸ—‘ï¸ å‰Šé™¤ãƒ¢ãƒ¼ãƒ‰
                    </button>
                </div>
            </div>
            
            <!-- å‡¡ä¾‹ -->
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #2ecc71;"></div>
                    <span>ç©ºå¸­</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #e74c3c;"></div>
                    <span>ä½¿ç”¨ä¸­</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f39c12;"></div>
                    <span>äºˆç´„æ¸ˆã¿</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3498db;"></div>
                    <span>æ¸…æƒä¸­</span>
                </div>
            </div>
            
            <!-- å¸­ã‚°ãƒªãƒƒãƒ‰ -->
            <div class="floor-grid" id="floorGrid">
                <!-- å¸­ãŒå‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ -->
            </div>
        </div>
        
        <!-- äºˆç´„å‰²ã‚Šå½“ã¦ãƒ‘ãƒãƒ« -->
        <div class="assignment-panel">
            <h2 class="floor-title">æœ¬æ—¥ã®äºˆç´„å‰²ã‚Šå½“ã¦</h2>
            <div class="reservation-list" id="reservationList">
                <!-- äºˆç´„ãŒå‹•çš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
            </div>
        </div>
    </div>
    
    <!-- å¸­å‰²ã‚Šå½“ã¦ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="assignModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">å¸­ã®å‰²ã‚Šå½“ã¦</h2>
                <button class="modal-close" onclick="closeModal()">Ã—</button>
            </div>
            <div class="form-group">
                <label class="form-label">äºˆç´„æƒ…å ±</label>
                <div id="modalReservationInfo" style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <!-- äºˆç´„æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ -->
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">å‰²ã‚Šå½“ã¦ã‚‹å¸­</label>
                <select class="form-select" id="seatSelect">
                    <option value="">å¸­ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="btn btn-primary" onclick="confirmAssignment()">å‰²ã‚Šå½“ã¦</button>
            </div>
        </div>
    </div>

    <!-- å¸­è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="addSeatModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">æ–°ã—ã„å¸­ã‚’è¿½åŠ </h2>
                <button class="modal-close" onclick="closeAddSeatModal()">Ã—</button>
            </div>
            <div class="form-group">
                <label class="form-label">å¸­ç•ªå·</label>
                <input type="text" class="form-input" id="newSeatId" placeholder="ä¾‹: D1, VIP3">
            </div>
            <div class="form-group">
                <label class="form-label">å¸­ã‚¿ã‚¤ãƒ—</label>
                <select class="form-select" id="newSeatType">
                    <option value="table">ãƒ†ãƒ¼ãƒ–ãƒ«</option>
                    <option value="counter">ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</option>
                    <option value="private">å€‹å®¤</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">åå®¹äººæ•°</label>
                <input type="number" class="form-input" id="newSeatCapacity" min="1" max="20" value="4">
            </div>
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeAddSeatModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="btn btn-primary" onclick="addNewSeat()">è¿½åŠ </button>
            </div>
        </div>
    </div>
    
    <script>
        // å¸­ãƒ‡ãƒ¼ã‚¿
        const seats = [
            { id: 'A1', type: 'table', capacity: 4, status: 'available' },
            { id: 'A2', type: 'table', capacity: 4, status: 'occupied', customer: 'å±±ç”°æ§˜' },
            { id: 'A3', type: 'table', capacity: 4, status: 'available' },
            { id: 'A4', type: 'table', capacity: 4, status: 'reserved', time: '19:00' },
            { id: 'B1', type: 'table', capacity: 2, status: 'available' },
            { id: 'B2', type: 'table', capacity: 2, status: 'occupied', customer: 'ä½è—¤æ§˜' },
            { id: 'B3', type: 'table', capacity: 2, status: 'cleaning' },
            { id: 'B4', type: 'table', capacity: 2, status: 'available' },
            { id: 'C1', type: 'counter', capacity: 1, status: 'available' },
            { id: 'C2', type: 'counter', capacity: 1, status: 'available' },
            { id: 'C3', type: 'counter', capacity: 1, status: 'occupied', customer: 'éˆ´æœ¨æ§˜' },
            { id: 'C4', type: 'counter', capacity: 1, status: 'available' },
            { id: 'C5', type: 'counter', capacity: 1, status: 'available' },
            { id: 'C6', type: 'counter', capacity: 1, status: 'occupied', customer: 'ç”°ä¸­æ§˜' },
            { id: 'C7', type: 'counter', capacity: 1, status: 'available' },
            { id: 'C8', type: 'counter', capacity: 1, status: 'available' },
            { id: 'VIP1', type: 'private', capacity: 6, status: 'reserved', time: '20:00' },
            { id: 'VIP2', type: 'private', capacity: 8, status: 'occupied', customer: 'é«˜æ©‹æ§˜' }
        ];
        
        // äºˆç´„ãƒ‡ãƒ¼ã‚¿
        const reservations = [
            { id: 1, customerName: 'ä¼Šè—¤æ§˜', time: '18:00', numberOfPeople: 4, assigned: false },
            { id: 2, customerName: 'æ¸¡è¾ºæ§˜', time: '18:30', numberOfPeople: 2, assigned: 'B1' },
            { id: 3, customerName: 'ä¸­æ‘æ§˜', time: '19:00', numberOfPeople: 3, assigned: false },
            { id: 4, customerName: 'å°æ—æ§˜', time: '19:30', numberOfPeople: 6, assigned: false },
            { id: 5, customerName: 'åŠ è—¤æ§˜', time: '20:00', numberOfPeople: 2, assigned: false }
        ];
        
        let selectedReservation = null;
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadSeatData();
            renderFloorMap();
            renderReservations();
            updateStats();
        });

        // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒˆã‚°ãƒ«
        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’é–‰ã˜ã‚‹
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.remove('active');
        }
        
        // ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—æç”»
        function renderFloorMap() {
            const grid = document.getElementById('floorGrid');
            grid.innerHTML = '';
            
            seats.forEach(seat => {
                const seatEl = document.createElement('div');
                seatEl.className = `seat ${seat.status}`;
                if (deleteMode) {
                    seatEl.style.cursor = 'pointer';
                    seatEl.style.border = '2px dashed #e74c3c';
                    seatEl.onclick = () => deleteSeat(seat.id);
                } else {
                    seatEl.onclick = () => handleSeatClick(seat);
                }
                
                let statusInfo = '';
                if (seat.status === 'occupied' && seat.customer) {
                    statusInfo = `<div style="font-size: 11px; margin-top: 4px;">${seat.customer}</div>`;
                } else if (seat.status === 'reserved' && seat.time) {
                    statusInfo = `<div style="font-size: 11px; margin-top: 4px;">${seat.time}ã€œ</div>`;
                }
                
                seatEl.innerHTML = `
                    <div class="seat-status"></div>
                    <div class="seat-number">${seat.id}</div>
                    <div class="seat-capacity">${seat.capacity}åå¸­</div>
                    ${statusInfo}
                    ${deleteMode ? '<div style="color: #e74c3c; font-size: 11px;">ã‚¯ãƒªãƒƒã‚¯ã§å‰Šé™¤</div>' : ''}
                `;
                
                grid.appendChild(seatEl);
            });
        }
        
        // äºˆç´„ãƒªã‚¹ãƒˆæç”»
        function renderReservations() {
            const list = document.getElementById('reservationList');
            list.innerHTML = '';
            
            const today = new Date().toLocaleDateString('ja-JP');
            
            reservations.forEach(reservation => {
                const item = document.createElement('div');
                item.className = 'reservation-item';
                
                const assignedSeat = reservation.assigned ? 
                    `<span style="color: #2ecc71;">âœ“ ${reservation.assigned}å¸­</span>` : 
                    '<span style="color: #e74c3c;">æœªå‰²ã‚Šå½“ã¦</span>';
                
                item.innerHTML = `
                    <div class="reservation-info">
                        <div class="customer-name">${reservation.customerName}</div>
                        <div class="reservation-details">
                            ${today} ${reservation.time} / ${reservation.numberOfPeople}å / ${assignedSeat}
                        </div>
                    </div>
                    <button class="assign-btn ${reservation.assigned ? 'assigned' : ''}" 
                            onclick="openAssignModal(${reservation.id})">
                        ${reservation.assigned ? 'å¤‰æ›´' : 'å¸­ã‚’å‰²ã‚Šå½“ã¦'}
                    </button>
                `;
                
                list.appendChild(item);
            });
        }
        
        // çµ±è¨ˆæ›´æ–°
        function updateStats() {
            const total = seats.length;
            const available = seats.filter(s => s.status === 'available').length;
            const occupied = seats.filter(s => s.status === 'occupied').length;
            const reserved = seats.filter(s => s.status === 'reserved').length;
            const cleaning = seats.filter(s => s.status === 'cleaning').length;
            
            // çµ±è¨ˆã‚«ãƒ¼ãƒ‰ã®å€¤ã‚’æ›´æ–°ï¼ˆå®Ÿéš›ã®DOMãŒã‚ã‚Œã°ï¼‰
        }
        
        // å¸­ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
        function handleSeatClick(seat) {
            if (seat.status === 'available') {
                // ç©ºå¸­ã®å ´åˆã€çŠ¶æ…‹å¤‰æ›´ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
                const newStatus = prompt(`å¸­ ${seat.id} ã®çŠ¶æ…‹ã‚’å¤‰æ›´:\n1: ä½¿ç”¨ä¸­\n2: æ¸…æƒä¸­\n3: äºˆç´„æ¸ˆã¿`);
                if (newStatus === '1') {
                    seat.status = 'occupied';
                    seat.customer = prompt('ãŠå®¢æ§˜å:') || 'åå‰ãªã—';
                } else if (newStatus === '2') {
                    seat.status = 'cleaning';
                } else if (newStatus === '3') {
                    seat.status = 'reserved';
                    seat.time = prompt('äºˆç´„æ™‚é–“:') || '19:00';
                }
                renderFloorMap();
                updateStats();
            } else if (seat.status === 'occupied' || seat.status === 'cleaning') {
                // ä½¿ç”¨ä¸­/æ¸…æƒä¸­ã®å ´åˆã€ç©ºå¸­ã«æˆ»ã™
                if (confirm(`å¸­ ${seat.id} ã‚’ç©ºå¸­ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ`)) {
                    seat.status = 'available';
                    delete seat.customer;
                    delete seat.time;
                    renderFloorMap();
                    updateStats();
                }
            }
        }
        
        // å‰²ã‚Šå½“ã¦ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        function openAssignModal(reservationId) {
            selectedReservation = reservations.find(r => r.id === reservationId);
            if (!selectedReservation) return;
            
            const modal = document.getElementById('assignModal');
            const info = document.getElementById('modalReservationInfo');
            const select = document.getElementById('seatSelect');
            
            // äºˆç´„æƒ…å ±è¡¨ç¤º
            info.innerHTML = `
                <div><strong>${selectedReservation.customerName}</strong></div>
                <div>æ™‚é–“: ${selectedReservation.time}</div>
                <div>äººæ•°: ${selectedReservation.numberOfPeople}å</div>
                ${selectedReservation.assigned ? `<div>ç¾åœ¨ã®å¸­: ${selectedReservation.assigned}</div>` : ''}
            `;
            
            // åˆ©ç”¨å¯èƒ½ãªå¸­ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—
            select.innerHTML = '<option value="">å¸­ã‚’é¸æŠã—ã¦ãã ã•ã„</option>';
            seats.filter(seat => 
                seat.status === 'available' && 
                seat.capacity >= selectedReservation.numberOfPeople
            ).forEach(seat => {
                const option = document.createElement('option');
                option.value = seat.id;
                option.textContent = `${seat.id} (${seat.capacity}åå¸­)`;
                select.appendChild(option);
            });
            
            modal.classList.add('active');
        }
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeModal() {
            document.getElementById('assignModal').classList.remove('active');
            selectedReservation = null;
        }
        
        // å¸­å‰²ã‚Šå½“ã¦ç¢ºå®š
        function confirmAssignment() {
            const seatId = document.getElementById('seatSelect').value;
            if (!seatId || !selectedReservation) return;
            
            // ä»¥å‰ã®å¸­ã‚’è§£æ”¾
            if (selectedReservation.assigned) {
                const oldSeat = seats.find(s => s.id === selectedReservation.assigned);
                if (oldSeat) {
                    oldSeat.status = 'available';
                    delete oldSeat.customer;
                }
            }
            
            // æ–°ã—ã„å¸­ã‚’äºˆç´„
            const newSeat = seats.find(s => s.id === seatId);
            if (newSeat) {
                newSeat.status = 'reserved';
                newSeat.time = selectedReservation.time;
                selectedReservation.assigned = seatId;
            }
            
            renderFloorMap();
            renderReservations();
            updateStats();
            closeModal();
            
            // é€šçŸ¥
            showNotification(`${selectedReservation.customerName}ã‚’${seatId}å¸­ã«å‰²ã‚Šå½“ã¦ã¾ã—ãŸ`);
        }
        
        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message, type = 'success') {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? '#2ecc71' : type === 'error' ? '#e74c3c' : '#f39c12';
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: ${bgColor};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 3000;
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.remove(), 3000);
        }

        // å‰Šé™¤ãƒ¢ãƒ¼ãƒ‰
        let deleteMode = false;

        function toggleDeleteMode() {
            deleteMode = !deleteMode;
            const btn = event.target;
            if (deleteMode) {
                btn.style.background = '#c0392b';
                btn.textContent = 'âœ–ï¸ å‰Šé™¤ãƒ¢ãƒ¼ãƒ‰çµ‚äº†';
                showNotification('å‰Šé™¤ã—ãŸã„å¸­ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', 'warning');
            } else {
                btn.style.background = '#e74c3c';
                btn.textContent = 'ğŸ—‘ï¸ å‰Šé™¤ãƒ¢ãƒ¼ãƒ‰';
            }
            renderFloorMap();
        }

        // å¸­ã‚’å‰Šé™¤
        function deleteSeat(seatId) {
            if (!deleteMode) return;
            
            if (confirm(`å¸­ ${seatId} ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                const index = seats.findIndex(s => s.id === seatId);
                if (index !== -1) {
                    seats.splice(index, 1);
                    renderFloorMap();
                    updateStats();
                    showNotification(`å¸­ ${seatId} ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
                    saveSeatData();
                }
            }
        }

        // å¸­è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        function openAddSeatModal() {
            document.getElementById('addSeatModal').classList.add('active');
        }

        // å¸­è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeAddSeatModal() {
            document.getElementById('addSeatModal').classList.remove('active');
            document.getElementById('newSeatId').value = '';
            document.getElementById('newSeatCapacity').value = '4';
        }

        // æ–°ã—ã„å¸­ã‚’è¿½åŠ 
        function addNewSeat() {
            const seatId = document.getElementById('newSeatId').value.trim();
            const seatType = document.getElementById('newSeatType').value;
            const capacity = parseInt(document.getElementById('newSeatCapacity').value);

            if (!seatId) {
                showNotification('å¸­ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            if (seats.find(s => s.id === seatId)) {
                showNotification('ãã®å¸­ç•ªå·ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™', 'error');
                return;
            }

            seats.push({
                id: seatId,
                type: seatType,
                capacity: capacity,
                status: 'available'
            });

            renderFloorMap();
            updateStats();
            closeAddSeatModal();
            showNotification(`å¸­ ${seatId} ã‚’è¿½åŠ ã—ã¾ã—ãŸ`);
            saveSeatData();
        }

        // å¸­ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
        function saveSeatData() {
            localStorage.setItem('seatData', JSON.stringify(seats));
        }

        // å¸­ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
        function loadSeatData() {
            const saved = localStorage.getItem('seatData');
            if (saved) {
                seats.length = 0;
                seats.push(...JSON.parse(saved));
            }
        }
    </script>
</body>
</html>